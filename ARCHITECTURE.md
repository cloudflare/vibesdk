# FARTNODE Architecture (Bootstrap)

The current repository is a Solana-focused fork of Cloudflare's VibeSDK. This PR establishes the scaffolding that future Solana work will build on.

## High-Level Components

- **App Shell (`src/`)** – React + Vite application that renders the control panels, previews, and generated apps. The new `src/fartnode/*` namespace will host Solana-specific UI.
- **Workers (`worker/`)** – Cloudflare Worker durable object that orchestrates generation, planning, and deployments. The fart.yaml validator will integrate here to guard user-provided configs.
- **Schemas (`schemas/`)** – JSON schema for `fart.yaml` that callers must satisfy before executing Solana flows.
- **Packages (`packages/@fartnode/*`)** – TypeScript client packages for each Anchor program. They currently expose stubs so downstream code can compile.
- **Programs (`programs/`)** – Anchor workspace with placeholder crates for points, quests, escrow, and registry. Real logic will land in PR-003.
- **Templates (`templates/`)** – Placeholder manifests for the `arcade` and `rpg-lite` experiences. Scripts will later upload these bundles to R2.
- **Scripts (`scripts/`)** – Operational entry points (devnet deploy, template publish) that will drive the Solana toolchain in subsequent work.

## Data Flow (Planned)

1. A user provides `fart.yaml` + prompts. `CodingAgentController` validates the config using `assertFartConfig` before generating any code.
2. The worker passes the validated config into the durable object state so each phase knows which Solana programs / templates to target.
3. Templates reference program IDs generated by `scripts/devnet-deploy.ts` and injected into `app/web/lib/ids.ts`.
4. Frontend components under `src/fartnode` render the Solana panel, wallet wiring, and module toggles powered by the validated config.
5. Anchor programs compile in the preview container (thanks to the `SandboxDockerfile` toolchain) and publish IDLs + TypeScript clients.

## Next Steps

- Wire Phantom adapter + RPC selector (PR-002).
- Flesh out Anchor logic with registry + points/quests/escrow flows (PR-003).
- Push templates to R2 and teach the generator to consume them (PR-004).
- Harden attestations, badges, and docs (PR-005).
